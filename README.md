Для основы было взято готовое Njde js приложение которое создает форму авторизации на веб странице. В случае успешной авторизации пользователя перенаправляли на другую страницу. 

Что было сделано для реализации  CI CD пайплайна. 

В файле .gitlab-ci.yml есть пять шагов. 
1. На этапе build_to_docker "додкерезируем" node js приложение, добавляем текущую версию сборки на страницу приложения, собираем докер образ, присваиваем ему уникальный тег, логинимся в докер хаб и пушим образ в репозиторий 
2. На этапе run_on_develop мы на node1 останавливаем нужный контейнер, логинимся на докер хаб, скачиваем с него нужный образ и запускаем его. 
3. На этапе test_dev_app мы делаем простую проверку что наш сервис отвечает на 80 порту айпи адреса node1
4. На этапе deploy_to_prod мы на node3 останавливаем запущенный контейнер, логинимся на докер хаб, скачиваем с него нужный образ и запускаем его.
5. На этапе test_prod как и в третьем пункте мы делаем проверку что наш сервис отвечает на 80 порту айпи адреса продакшен ноды

Для реализации в настройках пайплайна должны быть созданы переменные CI_REGISTRY, CI_REGISTRY_PASSWORD, CI_REGISTRY_USER, IMAGE_NAME Также должны существавать два раннера node1 - develop и node3 - prod. 

